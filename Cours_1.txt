                                       Faites vos premiers pas en PHP

Tirez un maximum de ce cours

Bonjour et bienvenue dans ce cours !

Rencontrez vos professeurs
Mathieu Nebra


Faut-il encore vous pr√©senter Mathieu ? Le premier enseignant de la plateforme ! Tous ses cours sont tr√®s suivis et appr√©ci√©s. Nous les mettons progressivement √† jour pour qu‚Äôils correspondent √† ce que nous savons faire de mieux en termes de multim√©dia et de p√©dagogie.

Mathieu, qui a √©crit la premi√®re version de ce cours il y a plusieurs ann√©es, vous accompagnera dans ce cours pour vous pr√©senter les notions cl√©s. Vous le retrouverez en vid√©o et dans le texte des chapitres.

Micka√´l Andrieu


Micka√´l est √©galement auteur de cours chez OpenClassrooms‚Ä¶ et ailleurs ! Sa vie professionnelle se partage notamment entre le d√©veloppement PHP et la Data, domaine dans lequel il se forme actuellement.

C‚Äôest Mick√§el qui a mis √† jour le cours de Mathieu, et qui a enregistr√© des vid√©os tutor√©es, pour vous aider √† mettre les concepts en pratique !

St√©phane Bourse


St√©phane cumule plusieurs ann√©es d'exp√©rience dans le domaine du d√©veloppement, se sp√©cialisant notamment dans PHP et Symfony. Mais il a √©largi ses comp√©tences au domaine du JavaScript avec React. En tant que mentor chez OpenClassrooms, il appr√©cie partager son expertise et sa passion du d√©veloppement.

St√©phane a actualis√© le cours pour PHP 8.2. Des exercices 'Exercez-vous' ont √©t√© int√©gr√©s pour permettre aux apprenants de construire progressivement le projet fil rouge et de renforcer leur compr√©hension des concepts enseign√©s.

Ce cours a √©t√© mis √† jour, cependant dans certaines vid√©os vous remarquerez quelques petites incoh√©rences. Cela ne devrait pas vous emp√™cher de r√©aliser le cours.

Mettez-vous √† niveau en HTML et CSS si besoin

La plupart des sites web que vous visitez aujourd'hui, y compris OpenClassrooms, sont des sites dynamiques. Le seul pr√©requis pour apprendre √† cr√©er ce type de site est de savoir r√©aliser des sites statiques en HTML et CSS.

Vous pouvez suivre le cours HTML/CSS sur OpenClassrooms pour vous mettre √† niveau.

Pour d√©couvrir l'√©cosyst√®me du d√©veloppement web et tous les cours que nous vous proposons √† ce sujet, nous vous invitons √† faire un tour sur notre Carte des Connaissances ! Vous pourrez y voir en un clin d'≈ìil les diff√©rents langages et sp√©cialisations auxquels vous pourrez vous former avec OpenClassrooms !

Pratiquez en suivant le projet fil rouge

L'objectif de ce cours est de vous permettre de r√©aliser des sites web dynamiques, pas √† pas.

Pour cela, nous avons mis au point dans ce cours un projet fil rouge. Cela signifie que vous allez avancer chapitre par chapitre en apprenant comment r√©aliser un site web dynamique de partage de recettes de cuisine. Chaque chapitre vous donnera des cl√©s suppl√©mentaires pour avancer dans ce projet pratique.

Vous pouvez trouver l'ensemble de fichiers li√©s au projet fil rouge dans notre repo Github.

Ce cours commence par la base de la base‚Ä¶ Et c'est le sujet du prochain chapitre ! Alors, vous √™tes pr√™t ? On y va !

##############################################################################################################

D√©couvrez le fonctionnement d'un site √©crit en PHP

Ce qui fait le succ√®s du Web aujourd'hui, c'est sa simplicit√©, sa facilit√© d'acc√®s. Un internaute lambda n'a pas besoin de savoir comment √ßa fonctionne concr√®tement. Et heureusement pour lui.

En revanche, un apprenti webmaster tel que vous doit, avant toute chose, conna√Ætre les bases du fonctionnement d'un site web.

Qu'est-ce qu'un serveur et un client ? Comment rend-on son site dynamique ? Et que signifient PHP et MySQL ?

Pas d'inqui√©tude !

Ce premier chapitre est l√† pour r√©pondre √† toutes ces questions et vous montrer que vous √™tes capable d'apprendre √† cr√©er des sites web dynamiques !

Faites la diff√©rence entre site statique et dynamique

On consid√®re qu'il existe deux types de sites web :

  1. Les sites statiques.

  2. Et les sites dynamiques.

D√©couvrez le principe d'un site statique 

Un site statique est r√©alis√© uniquement √† l'aide des langages HTML et CSS.

Il fonctionne tr√®s bien, mais son contenu ne peut pas √™tre mis √† jour automatiquement : il faut que le webmaster modifie le code source pour y ajouter des nouveaut√©s.

Ce n'est pas tr√®s pratique quand on doit mettre √† jour son site plusieurs fois dans la m√™me journ√©e‚Ä¶

Un site statique est adapt√© pour un site ¬´ vitrine ¬ª (pour pr√©senter par exemple son entreprise), mais sans aller plus loin.

Ce type de site se fait de plus en plus rare aujourd'hui, car d√®s que l'on rajoute un √©l√©ment d'interaction (comme un formulaire de contact), on ne parle plus de site statique mais de site dynamique.

D√©couvrez le principe d'un site dynamique

Plus complexe, un site dynamique utilise d'autres langages en plus de HTML et CSS, tels que PHP et MySQL.

Le contenu de ce type de site est dit ¬´ dynamique ¬ª parce qu'il peut changer sans l'intervention du webmaster !

Maintenant que vous comprenez la diff√©rence entre un site statique et un site dynamique, nous pouvons passer √† la suite !

OK, je vois la diff√©rence mais au fond, comment √ßa fonctionne ?

J'y viens ! C'est l'objet de la suite de ce chapitre.

Comprenez le fonctionnement d'un site web

Lorsque vous voulez visiter un site web, vous tapez son adresse dans votre navigateur web. Mais ne vous √™tes-vous jamais demand√© comment faisait la page web pour arriver jusqu'√† vous ?

Il faut savoir qu'Internet est un r√©seau compos√© d'ordinateurs. Ceux-ci peuvent √™tre class√©s en deux cat√©gories :

  1. Les clients : ce sont les ordinateurs des internautes comme vous. Votre ordinateur fait donc partie de la 
     cat√©gorie des clients. Chaque client repr√©sente un visiteur d'un site web.

  2. Les serveurs : ce sont des ordinateurs puissants qui stockent et d√©livrent des sites web aux internautes, 
     c'est-√†-dire aux clients. La plupart des internautes n'ont jamais vu un serveur de leur vie. Pourtant, 
     les serveurs sont indispensables au bon fonctionnement du Web. 

Vous avez envie d'en savoir plus le mod√®le client-serveur ? N'h√©sitez pas √† suivre le cours comprendre le Web.

On r√©sume : votre ordinateur est appel√© le client, tandis que l'ordinateur qui d√©tient le site web est appel√© le serveur.

Comment les deux communiquent-ils ?

C'est justement l√† que se fait la diff√©rence entre un site statique et un site dynamique. Voyons ensemble ce qui change.

Consultez un site statique
Lorsque vous vous rendez sur site statique, c'est tr√®s simple. Cela se passe en deux temps :

  1. Le client demande au serveur √† voir une page web.

  2. Le serveur lui r√©pond en lui envoyant la page r√©clam√©e.

La communication est donc plut√¥t basique :

  - ¬´ Bonjour, je suis le client, je voudrais voir cette page web. ¬ª

  - ¬´ Tiens, voil√† la page que tu m'as demand√©e. ¬ª

Sur un site statique, il ne se passe rien d'autre. Le serveur stocke des pages web et les envoie aux clients qui les demandent, sans les modifier.

Consultez un site dynamique

Lorsque vous consultez un site dynamique, il y a une √©tape interm√©diaire : la page est g√©n√©r√©e.

Qu'est-ce que √ßa veut dire ?

Eh bien, il y a une √©tape suppl√©mentaire, et elle se situe entre les deux √©tapes de base :

  1. Le client demande au serveur √† voir une page web.

  2. Le serveur pr√©pare la page sp√©cialement pour le client (il la g√©n√®re).

  3. Le serveur lui envoie la page qu'il vient de g√©n√©rer.

La page web est g√©n√©r√©e √† chaque fois qu'un client la r√©clame. C'est pr√©cis√©ment ce qui rend les sites dynamiques "vivants" : le contenu d'une m√™me page peut changer d'un instant √† l'autre.

C'est comme cela que certains sites parviennent √† afficher par exemple votre pseudonyme sur toutes les pages. √âtant donn√© que le serveur g√©n√®re une page √† chaque fois qu'on lui en demande une, il peut la personnaliser en fonction des go√ªts et des pr√©f√©rences du visiteur.

Exploitez les langages du Web

Lorsqu'on cr√©e un site web, on est amen√© √† manipuler non pas un mais plusieurs langages. En tant que webmaster, il faut imp√©rativement les conna√Ætre.

Utilisez HTML et CSS pour un site statique
De nombreux langages ont √©t√© cr√©√©s pour produire des sites web. Deux d'entre eux constituent une base incontournable pour tous les webmasters.

HTML
C'est le langage √† la base des sites web. Simple √† apprendre, il fonctionne √† partir de balises. Voici un exemple de code HTML :

<p>Bonjour, je suis un <em>paragraphe</em> de texte !</p>

CSS 

C'est le langage de mise en forme des sites web. Alors que le HTML permet d'√©crire le contenu de vos pages web et de le structurer, le langage CSS s'occupe de la mise en forme et de la mise en page. C'est en CSS que l'on choisit notamment la couleur, la taille des menus et bien d'autres choses encore.

Voici un code CSS :

div.banner {
   text-align: center;
   font-weight: bold;
   font-size: 120%;
}

Ces langages sont la base de tous les sites web. Lorsque le serveur envoie la page web au client, il envoie en fait du code √©crit avec les langages HTML et CSS.

Le probl√®me, c'est que lorsqu'on conna√Æt seulement HTML et CSS, on ne peut produire que des sites statiques‚Ä¶ et non des sites dynamiques ! Pour ces derniers, il est n√©cessaire de manipuler d'autres langages, en plus de HTML et CSS.

Ajoutez PHP et MySQL pour un site dynamique

Quel que soit le site web que l'on souhaite cr√©er, HTML et CSS sont donc indispensables. Cependant, ils ne suffisent pas pour r√©aliser des sites dynamiques. Il faut les compl√©ter avec d'autres langages.

C'est justement tout l'objet de ce cours : vous allez apprendre √† manipuler PHP et MySQL pour r√©aliser un site web dynamique.

PHP

C'est un langage que seuls les serveurs comprennent, et qui permet de rendre votre site dynamique. C'est PHP qui ¬´ g√©n√®re ¬ª la page web comme on l'a vu sur un des sch√©mas pr√©c√©dents.

Ce sera le premier langage que nous d√©couvrirons dans ce cours.

Voici un code PHP :

<?php echo "Vous √™tes le visiteur n¬∞" . $nbre_visiteurs; ?>

Le langage PHP peut fonctionner seul, mais il ne prend vraiment de l'int√©r√™t que s'il est combin√© √† un outil tel que MySQL.

MySQL

MySQL est ce que l'on appelle un Syst√®me de Gestion de Bases de Donn√©es (SGBD).

Pour faire simple : son r√¥le est d'enregistrer des donn√©es de mani√®re organis√©e, afin de vous aider √† les retrouver facilement plus tard.

C'est gr√¢ce √† MySQL que vous pourrez enregistrer :

  - la liste des membres de votre site web ;

  - les messages post√©s sur le forum ;

  - etc.

Rappelez-vous, dans ce cours on d√©couvre toutes les notions de base et on les met en pratique au travers d'un projet fil rouge : la cr√©ation d'un site de recettes de cuisine !

Le langage qui permet de communiquer avec la base de donn√©es s'appelle le SQL.

Voici un code en langage SQL :

SELECT id, auteur, message, datemsg FROM livreor ORDER BY datemsg DESC LIMIT 0, 10

PHP et MySQL sont disponibles gratuitement et sous licence Open Source. Cela signifie une chose essentielle : vous n'aurez pas √† d√©bourser un centime pour construire votre site web !

Oublions pour le moment MySQL et concentrons-nous sur PHP.

Les clients sont incapables de comprendre le code PHP : ils ne connaissent que le HTML et le CSS. Seul le serveur est capable de lire du PHP. Le r√¥le de PHP est justement de g√©n√©rer du code HTML, code qui est ensuite envoy√© au client de la m√™me mani√®re qu'un site statique, comme le montre la figure suivante :

PHP est un langage de programmation utilis√© sur de nombreux serveurs pour prendre des d√©cisions. C'est PHP qui d√©cide du code HTML qui sera g√©n√©r√© et envoy√© au client √† chaque fois.

Pour bien comprendre l'int√©r√™t de tout cela, prenons un exemple.

On peut √©crire en PHP :

¬´ Si le visiteur est membre de mon site et qu'il s'appelle Jonathan, affiche Bienvenue Jonathan sur la page web. En revanche, si ce n'est pas un membre de mon site, affiche Bienvenue √† la place, et propose au visiteur de s‚Äôinscrire. ¬ª

C'est un exemple tr√®s basique de site dynamique : selon que vous √™tes un membre enregistr√© ou non, vous ne verrez pas les m√™mes choses, et n'aurez peut-√™tre pas acc√®s au m√™me contenu.

En r√©sum√©

- Il existe deux types de sites web :

      1. Les sites statiques : r√©alis√©s en HTML et CSS, leur contenu ne peut √™tre mis √† jour que par le 
         webmaster.

      2. Les sites dynamiques : r√©alis√©s avec d'autres outils comme PHP et MySQL en plus de HTML et CSS, ils 
         permettent aux visiteurs de participer √† la vie du site, de poster des messages‚Ä¶ bref, de rendre le 
         site vivant !

- Les visiteurs du site sont appel√©s les "clients". Ils demandent au serveur qui h√©berge le site de leur 
  transmettre les pages web.

- PHP est un langage ex√©cut√© par le serveur. Il permet de personnaliser la page en fonction du visiteur, de 
  traiter ses messages, d'effectuer des calculs, etc. Il g√©n√®re une page HTML.

- MySQL est un syst√®me de gestion de bases de donn√©es. Il se charge du stockage des informations (liste des 
  messages, des membres‚Ä¶).

Dans le prochain chapitre, nous allons voir comment vous pr√©parer pour commencer √† coder !

##############################################################################################################

Pr√©parez votre environnement de travail

Nous savons d√©sormais que PHP s'ex√©cute sur le serveur, et que son r√¥le est de g√©n√©rer des pages web. Cependant, seul un serveur peut lire du PHP ; or, votre ordinateur n'est pas un serveur.

Mais alors comment cr√©er un site dynamique si PHP ne fonctionne pas chez moi ?

Qu'√† cela ne tienne : nous allons temporairement transformer votre ordinateur en serveur pour que vous puissiez ex√©cuter du PHP et travailler sur votre site dynamique.

Vous serez fin pr√™t √† programmer apr√®s avoir lu ce chapitre !

Selon que l'on cr√©e un site statique ou un site dynamique, on a besoin de logiciels diff√©rents. En fait, faire un site dynamique n√©cessite malheureusement pour nous quelques logiciels suppl√©mentaires !

Ayez en t√™te les outils de base pour cr√©er un site statique

Les webmasters qui cr√©ent des sites statiques avec HTML et CSS ont de la chance, ils ont en g√©n√©ral d√©j√† tous les programmes dont ils ont besoin :

  1.Un √©diteur de texte.

  2.Un navigateur web.

Un √©diteur de texte

En th√©orie, un programme tel que le bloc-notes livr√© avec Windows suffit, bien qu'il soit recommand√© d'utiliser un outil un peu plus √©volu√©, comme Notepad++.

Nous reparlerons du choix de l'√©diteur √† la fin de ce chapitre.

Un navigateur web

Il permet de tester la page web.

Vous pouvez utiliser par exemple :

 - Mozilla Firefox ;

 - Microsoft Edge ;

 - Google Chrome ;

 - Opera ;

 - Safari ;

 - ou tout autre navigateur auquel vous √™tes habitu√© pour aller sur le Web.

Il est d'ailleurs conseill√© de tester son site r√©guli√®rement sur diff√©rents navigateurs.

Bref ! Mais, et vous le savez d√©j√† : pour cr√©er un site dynamique, ces outils ne suffisent pas‚Ä¶

Il est n√©cessaire d'installer des programmes suppl√©mentaires !

Utilisez les outils pour cr√©er un site dynamique

Pour que votre ordinateur puisse lire du PHP, il faut qu'il se comporte comme un serveur.

Rassurez-vous : vous n'avez pas besoin d'acheter une machine sp√©ciale pour cela !

Il suffit simplement d'installer les m√™mes programmes que ceux que l'on trouve sur les serveurs qui d√©livrent les sites web aux internautes.

Quels sont les programmes que je dois installer ?

Apache 

C'est ce qu'on appelle un serveur web. Il s'agit du plus important de tous les programmes, car c'est lui qui est charg√© de d√©livrer les pages web aux visiteurs. Cependant, Apache ne g√®re que les sites web statiques (il ne peut traiter que des pages HTML). Il faut donc le compl√©ter avec d'autres programmes.

PHP 

C'est un plug-in pour Apache qui le rend capable de traiter des pages web dynamiques en PHP. En clair, en combinant Apache et PHP, notre ordinateur sera capable de lire des pages web en PHP.

MySQL

C'est le logiciel de gestion de bases de donn√©es dont je vous ai parl√© avant. Il permet d'enregistrer des donn√©es de mani√®re organis√©e (comme la liste des membres de votre site). Nous n'en aurons pas besoin imm√©diatement, mais autant l'installer de suite.

Tous ces √©l√©ments sont libres et gratuits.

Certes, il en existe d'autres (parfois payants), mais la combinaison Apache + PHP + MySQL est la plus courante sur les serveurs web. √Ä tel point qu'on a cr√©√© des ¬´ packs ¬ª tout pr√™ts qui contiennent tous ces √©l√©ments. Il est possible de les installer un √† un, mais cela prend plus de temps et vous n'allez rien y gagner (sauf si vous √™tes administrateur de serveur, ce qui ne devrait pas √™tre votre cas).

Dans la suite de ce chapitre, nous allons voir comment installer le ¬´ pack ¬ª qui convient en fonction de votre syst√®me d'exploitation.

Je vous propose d'utiliser XAMPP qui marche √† la fois pour Windows, pour Mac et pour Linux.  Il a l'avantage d'√™tre r√©guli√®rement mis √† jour.

Installez XAMPP sous Windows

Il existe aussi WAMP et MAMP pour Windows. Vous pouvez les essayer, mais MAMP n'est pas souvent mis √† jour sur Windows. Je vous recommande donc d‚Äôessayer XAMPP en premier. 

Commencez par t√©l√©charger XAMPP sur son site. Prenez la version correspondante √† votre syst√®me d'exploitation. Une fois t√©l√©charg√©, installez-le. 

Lancez ensuite XAMPP. La fen√™tre suivante devrait appara√Ætre :

XAMPP met √† jour r√©guli√®rement son logiciel et les captures d'√©cran et fonctionnalit√©s pr√©sent√©es dans ce cours pourraient ne plus √™tre identiques. Pour bien suivre ce cours, installez la version de XAMPP ayant a minima la version 8.2.4 de PHP.

Apr√®s le d√©marrage de XAMPP, vous devez lancer deux programmes essentiels : Apache et MySQL. Cliquez sur le bouton "Start" pour Apache et sur le bouton "Start" pour MySQL. Vous devriez observer un fond de couleur verte appara√Ætre pour Apache et MySQL. Il peut parfois s'√©couler un court laps de temps avant que ces programmes ne soient pleinement op√©rationnels.

Si une fen√™tre appara√Æt pour vous indiquer que le pare-feu bloque Apache ou MySQL, cliquez sur "D√©bloquer". Vous n'avez aucune raison de vous inqui√©ter, c'est parfaitement normal.

V√©rifions maintenant que XAMPP est bien install√©. Je vous propose de cr√©er un projet de test que nous appellerons tests.

Pour ce faire cliquer sur le bouton "Explorer" de XAMPP Control Panel et rendez-vous dans le dossier racine  htdocs  . Puis, cr√©ez un nouveau sous-dossier que vous appellerez tests, comme sur cette image :

Maintenant ouvrez votre navigateur web. Dans la barre d'adresse, saisissez  localhost/tests  . Le dossier tests appara√Æt dans le navigateur.

Il n'y a rien √† l'int√©rieur pour le moment :

Si vous avez le m√™me r√©sultat, cela signifie que tout fonctionne. Bravo, vous avez install√© XAMPP et il fonctionne correctement. Vous √™tes pr√™t √† programmer en PHP !

QUOI ?! Tout √ßa pour √ßa ?

Eh oui, l'ami ! On n'a pas encore commenc√© √† programmer, il ne fallait pas non plus vous attendre √† un feu d'artifice tout de suite. üéÜ

Vous pouvez passer la section suivante qui ne concerne que les utilisateurs sous Mac et sous Linux.

D√©couvrez le serveur PHP int√©gr√©

Nous avons install√© des logiciels qui reproduisent le comportement exact d'un serveur tel qu'il serait configur√© et install√© en ligne. Mais pour de petits travaux sur votre ordinateur "en local", PHP fournit un serveur web interne tr√®s pratique, et qui utilise PHP en ligne de commande pour provoquer l'ex√©cution du script et le rendu de la page.

Par exemple, si l'on cr√©e un fichier PHP index.php avec le contenu suivant :

<?php

echo "Hello world";

et que nous ex√©cutons en ligne de commande au niveau du dossier o√π se trouve le fichier index.php :

php -S localhost:8080

  - localhost √©tant votre "nom de domaine" local ;

  - "8080" √©tant un port HTTP quelconque.

Ensuite, en acc√©dant √† http://localhost:8080/index.php, le retour de l'ex√©cution de ce script PHP sera disponible ! Pratique, non ?

Par la suite, dans les vid√©os du cours, nous utiliserons l'une ou l'autre des options propos√©es.

Vous √™tes pr√™t √† travailler en PHP !

Utilisez un bon √©diteur de texte

Comme vous devez d√©j√† le savoir, pour √©diter le code d'une page web, vous avez plusieurs solutions :

   - utiliser un √©diteur de texte tout simple que vous avez d√©j√†, comme Bloc-notes. Ce logiciel suffit 
     normalement √† √©crire des pages web en HTML et m√™me en PHP, mais‚Ä¶

   - le mieux reste d'utiliser un logiciel sp√©cialis√© qui colore votre code (tr√®s pratique) et qui num√©rote 
     vos lignes (tr√®s pratique aussi).

Il existe des centaines et des centaines de logiciels gratuits faits pour les d√©veloppeurs comme vous. Je vais vous en pr√©senter ici deux :

   1. Un que l'on peut utiliser gratuitement : Visual Studio Code.

   2. Et un payant : PHPStorm.

Je vous propose donc d'installer un logiciel qui va vous permettre d'√©diter vos fichiers sources de mani√®re efficace. Vous en avez probablement d√©j√† install√© un si vous avez appris √† programmer en HTML/CSS, mais comme on n'est jamais trop prudent, je vais rapidement vous en pr√©senter quelques-uns en fonction de votre syst√®me d'exploitation.

Voici le code source HTML que nous allons utiliser pour commencer en terrain connu. Copiez-collez ce code dans l'√©diteur de texte que je vais vous faire installer :

<html>
    <head>
        <meta charset="utf-8"/>
        <title>Ceci est une page HTML de test</title>
    </head>

    <body>
        <h2>Page de test</h2>
        <p>
            Cette page contient <strong>uniquement</strong> du code HTML.<br/>


            Voici quelques petits tests :


        </p>

        <ul>
            <li style="color: blue;">Texte en bleu</li>
            <li style="color: red;">Texte en rouge</li>
            <li style="color: green;">Texte en vert</li>
        </ul>
    </body>
</html>

Il n'y a pas de PHP pour l'instant, afin de commencer en douceur. Nous allons simplement essayer d'enregistrer un fichier HTML avec ce code pour nous √©chauffer.

Visual Studio Code

Que vous soyez sous Windows, Mac ou Linux, je vous recommande de commencer avec l'√©diteur Visual Studio Code qui est suffisamment l√©ger et simple si vous d√©butez.

Ne vous fiez pas √† son apparente simplicit√© : Visual Studio Code est en effet rapide et simple √† la base, mais il est possible d'√©tendre ses fonctionnalit√©s avec d'innombrables plugins !

Visual Studio Code est un tr√®s bon √©diteur, utilis√© par de nombreux d√©veloppeurs (y compris des professionnels). Il voit en revanche ses limites sur de gros projets, o√π certains lui pr√©f√®rent PHPStorm.

PHPStorm

PHPStorm ressemble un peu plus √† une "machine de guerre". Et pour cause : c'est un IDE, un environnement de travail de d√©veloppeur. Il est utilis√© par de nombreux d√©veloppeurs PHP professionnels de ma connaissance. 

PHPStorm est plus "costaud" que Visual Studio Code. Il met plus de temps √† charger, il peut avoir de nombreuses fonctionnalit√©s avanc√©es gr√¢ce √† ses plugins.

Par ailleurs, PHPStorm est payant.

Vous ne commencerez peut-√™tre pas de suite avec PHPStorm, mais gardez-le sur votre radar car c'est un outil tr√®s utilis√© que vous essaierez s√ªrement un jour.

En r√©sum√©

- Pour cr√©er des sites web dynamiques, nous devons installer des outils qui transforment notre ordinateur en 
  serveur, afin de pouvoir tester notre site.

- Les principaux outils n√©cessaires sont :

       1. Apache, le serveur web.

       2. PHP, le programme qui permet au serveur web d'ex√©cuter des pages PHP.

       3. MySQL, le logiciel de gestion de bases de donn√©es.

- Bien qu'il soit possible d'installer ces outils s√©par√©ment, il est plus simple pour nous d'installer un 
  paquetage tout pr√™t : XAMPP.

- Il est conseill√© d'utiliser un √©diteur de texte qui colore le code source, comme Visual Studio Code, pour 
  programmer convenablement en PHP. Pour les personnes plus exp√©riment√©es qui travaillent sur de gros projets, 
  je recommande PHPStorm.

Tout est install√©, maintenant vous allez passer √† la pratique et √©crire votre premier script. On y va !

##############################################################################################################

√âcrivez votre premier script

Un peu plus t√¥t dans ce cours, nous avons d√©couvert le principe de fonctionnement du PHP.

Maintenant, nous allons passer √† la pratique et r√©aliser notre toute premi√®re page web en PHP !

Ne vous attendez pas √† un r√©sultat extraordinaire, mais cela va vous permettre de prendre vos marques. Vous allez en particulier comprendre comment on s√©pare le code HTML classique du code PHP.

Vous √™tes pr√™t ? Allons-y !

Utilisez des balises PHP

Vous savez que le code source d'une page HTML est constitu√© de balises (aussi appel√©es tags, en anglais). Par exemple, <ul>  est une balise.

Le code PHP viendra s'ins√©rer au milieu du code HTML. On va progressivement placer dans nos pages web des morceaux de code PHP √† l'int√©rieur du HTML. Ces bouts de code PHP seront les parties dynamiques de la page, c'est-√†-dire les parties qui peuvent changer toutes seules.

Le code suivant illustre cela :

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Ma page web</title>
    </head>
    
    <body>
        <h1>Ma page web</h1>
        
        <p>
            Bonjour <!-- Ins√©rer le pseudo du visiteur ici --> !
        </p>

    </body>
</html>

Comme vous pouvez le voir, on retrouve le code HTML que l'on conna√Æt bien‚Ä¶ et on ins√®re en plus des donn√©es dynamiques au milieu. Ici, par exemple, c'est le pseudonyme : il change en fonction du visiteur.

OpenClassrooms fait la m√™me chose pour ses membres inscrits. Votre pseudonyme est affich√© en haut des pages lorsque vous √™tes connect√©.

Reconnaissez la forme d'une balise PHP

Si je vous parle de cela, ce n'est pas par hasard. Pour utiliser du PHP, on va devoir introduire une nouvelle balise‚Ä¶ et celle-ci est un peu sp√©ciale.

   1. Elle commence par  <?php 

   2. Et se termine par?>   

C'est √† l'int√©rieur que l'on mettra du code PHP (ce que je vais vous apprendre tout au long de ce cours).

Voici une balise PHP vide :

<?php ?>

√Ä l'int√©rieur, on √©crira donc du code source PHP :

<?php /* Le code PHP se met ici */ ?>

On peut sans probl√®me √©crire la balise PHP sur plusieurs lignes.

En fait, c'est m√™me indispensable car la plupart du temps, le code PHP fera plusieurs lignes.

Cela donnera quelque chose comme :

<?php
/* Le code PHP se met ici
Et ici
Et encore ici */
?>

Il existe d'autres balises pour utiliser du PHP ; par exemple : 

 - <? ?> 

 - <% %> 

 - <?= ?>

Ne soyez donc pas √©tonn√© si vous en voyez.

N√©anmoins, <?php ?>  est la forme la plus correcte ; vous apprendrez donc √† vous servir de cette balise et non pas des autres.

Ins√©rez une balise PHP au milieu du code HTML

La balise PHP que nous venons de d√©couvrir s'ins√®re au milieu du code HTML, comme je vous l'ai dit plus t√¥t. Pour reprendre l'exemple que l'on a vu au chapitre pr√©c√©dent :

<!DOCTYPE html>
<html>
    <head>
        <title>Ceci est une page de test avec des balises PHP</title>
        <meta charset="utf-8" />
    </head>
    <body>
        <h2>Page de test</h2>
        
        <p>
            Cette page contient du code HTML avec des balises PHP.<br />
            <?php /* Ins√©rer du code PHP ici */ ?>
            Voici quelques petits tests :
        </p>
        
        <ul>
        <li style="color: blue;">Texte en bleu</li>
        <li style="color: red;">Texte en rouge</li>
        <li style="color: green;">Texte en vert</li>
        </ul>
        
        <?php
        /* Encore du PHP
        Toujours du PHP */
        ?>
    </body>
</html>

Peut-on placer une balise PHP n'importe o√π dans le code ?

Oui ! Vraiment n'importe o√π. Pas seulement dans le corps de la page, d'ailleurs : vous pouvez placer une balise PHP dans l'en-t√™te de la page (regardez la ligne 4 de l'exemple ci-dessous).

<!DOCTYPE html>
<html>
    <head>
        <title>Ceci est une page de test <?php /* Code PHP */ ?></title>
        <meta charset="utf-8" />
    </head>

Plus fort encore, vous pouvez m√™me ins√©rer une balise PHP au milieu d'une balise HTML, comme le montre la ligne 5 de l'exemple ci-dessous (bon, ce n'est pas tr√®s joli, je vous l'accorde) :

<!DOCTYPE html>
<html>
    <head>
        <title>Ceci est une page de test</title>
        <meta <?php /* Code PHP */ ?> charset="utf-8" />
    </head>

Comment √ßa fonctionne ? √Ä quoi √ßa peut servir ?

Il faut se rappeler que PHP g√©n√®re du code HTML. Nous allons mieux comprendre le fonctionnement en apprenant √† afficher du texte en PHP.

Affichez du texte

Bon, tout √ßa c'est bien beau, mais il serait temps de commencer √† √©crire du code PHP, non ?

Grande nouvelle : c'est maintenant que vous allez apprendre votre premi√®re instruction en PHP.

Ne vous attendez pas √† quelque chose d'extraordinaire, votre PC ne va pas se mettre √† danser la samba tout seul. üòÑ

Vous allez cependant un peu mieux comprendre comment le PHP fonctionne, c'est-√†-dire comment il g√©n√®re du code HTML. Il est indispensable de bien comprendre cela ; soyez donc attentif !

Utilisez l'instruction echo

Le PHP est un langage de programmation, ce qui n'√©tait pas le cas du HTML. Dans ce cours, nous partons de z√©ro et donc je vais supposer que vous n'avez jamais fait de programmation auparavant.

Tout langage de programmation contient ce qu'on appelle des instructions. On en √©crit une par ligne en g√©n√©ral, et en PHP elles se terminent toutes par un point-virgule. Une instruction commande √† l'ordinateur d'effectuer une action pr√©cise.

Ici, la premi√®re instruction que nous allons d√©couvrir permet d'ins√©rer du texte dans la page web. Il s'agit de l'instruction echo, la plus simple et la plus basique de toutes les instructions que vous devez conna√Ætre.

Pour avoir plus d'informations sur l'instruction echo, vous pouvez consulter le site officiel de PHP : l'instruction echo. Le site officiel de PHP est la principale ressource pour la documentation, les t√©l√©chargements et les informations essentielles sur le langage de programmation PHP.

Voici un exemple d'utilisation de cette instruction :

<?php echo "Ceci est du texte"; ?>

<!-- Ou bien, avec des parenth√®ses -->
<?php echo("Ceci est du texte"); ?>

Comme vous le voyez, √† l'int√©rieur de la balise PHP on √©crit l'instruction echo  suivie du texte √† afficher entre guillemets. Les guillemets permettent de d√©limiter le d√©but et la fin du texte, ce qui aide l'ordinateur √† se rep√©rer.

L'instruction se termine par un point-virgule comme je vous l'avais annonc√©, ce qui signifie "Fin de l'instruction".

C'est beaucoup plus rare, mais l'instruction echo peut √™tre entour√©e de parenth√®ses ouvrantes et fermantes : nous reviendrons l√†-dessus dans le chapitre sur les fonctions.

Notez qu'il existe une instruction identique √† echo  appel√©e print  , qui fait la m√™me chose.

Cependant, echo est plus couramment utilis√©e.

Il faut savoir qu'on a aussi le droit de demander d'afficher des balises. Par exemple, le code suivant fonctionne :

?php echo "Ceci est du <strong>texte</strong>"; ?>
Le mot ¬´ texte ¬ª sera affich√© en gras gr√¢ce √† la pr√©sence des balises <strong>  et </strong>  .

Comment faire pour afficher un guillemet ?

Bonne question.

Si vous mettez un guillemet, √ßa veut dire pour l'ordinateur que le texte √† afficher s'arr√™te l√†. Vous risquez au mieux de faire planter votre beau code et d'avoir une terrible ¬´ Parse error ¬ª.

La solution consiste √† faire pr√©c√©der le guillemet d'un antislash  \  :

<?php echo "Cette ligne a √©t√© √©crite \"uniquement\" en PHP."; ?>

Vous savez que le code PHP s'ins√®re au milieu du code HTML. Alors allons-y, prenons une page basique en HTML et pla√ßons-y du code PHP (ligne 12).

<!DOCTYPE html>
<html>
    <head>
        <title>Notre premi√®re instruction : echo</title>
        <meta charset="utf-8" />
    </head>
    <body>
        <h2>Affichage de texte avec PHP</h2>
        
        <p>
            Cette ligne a √©t√© √©crite enti√®rement en HTML.<br />
            <?php echo("Celle-ci a √©t√© √©crite enti√®rement en PHP."); ?>
        </p>
    </body>
</html>

Je vous propose de copier-coller ce code source dans votre √©diteur de texte (Visual Studio Code ou autre... ) et d'enregistrer la page. Nous allons l'essayer et voir ce qu'elle produit comme r√©sultat.

Mais au fait, comment on fait d√©j√† pour enregistrer une page PHP ? 

Enregistrez une page PHP

Enregistrez la page avec l'extension  .php . Par exemple :  affichertexte.php  , dans le dossier tests que je vous ai fait cr√©er.

Il doit se trouver :

 - dans  C:\XAMPP\htdocs\tests  sous Windows,

 - ou   /Applications/XAMPP/htdocs/tests  sous Mac,

 - ou  /opt/lampp/htdocs/tests/  sous Linux.

Quel que soit votre syst√®me d'exploitation, l'essentiel est que le fichier soit enregistr√© dans le dossier  www  si vous utilisez MAMP ou WAMP (ou un de ses sous-dossiers) ; sinon le fichier PHP ne pourra pas s'ex√©cuter !

Une fois la page enregistr√©e, il faut maintenant la tester.

Testez une page PHP
Pour tester votre page PHP, tout d√©pend de votre syst√®me d'exploitation, mais la man≈ìuvre est la m√™me dans les grandes lignes.

  1. D√©marrez XAMPP si ce n'est pas d√©j√† fait.

  2. Allez √† l'adresse  http://localhost/tests . Une page web s'ouvre, indiquant tous les fichiers qui se 
     trouvent dans le dossier  tests . Vous devriez avoir le fichier   affichertexte.php .

  3. Cliquez dessus : votre ordinateur g√©n√®re alors le code PHP puis ouvre la page. Vous avez le r√©sultat 
     devant vos yeux √©bahis. üëÄ

Le m√™me r√©sultat peut √™tre obtenu dans votre navigateur, en allant directement √† l'adresse suivante :  http://localhost/tests/affichertexte.php  .

La m√©thode devrait √™tre quasiment la m√™me, que vous soyez sous Windows, macOS X ou Linux.

Si vous utilisez le serveur local de PHP, vous pouvez sauvegarder le fichier o√π vous le souhaitez, mais en contrepartie, vous devez toujours d√©marrer le serveur au niveau d'un dossier contenant le fichier √† ex√©cuter. Pour rappel, voici la commande :  php -S localhost:8080  .

Ne pas oublier : le serveur PHP recherche automatiquement un fichier nomm√©  index.php  comme point d'entr√©e par d√©faut !

Alors, que voyez-vous ?

Je pense que vous √™tes √©tonn√© et surpris de ce que je vous ai fait faire : √ßa a l'air d'√™tre inutile, et ce n'est pas tout √† fait faux‚Ä¶

Le code PHP a ¬´ √©crit ¬ª une ligne √† l'√©cran, tout simplement.

Mais‚Ä¶ ce n'est pas plus simple de l'√©crire en HTML, finalement ?

Si ! Mais vous verrez bient√¥t l'int√©r√™t de cette fonction. Pour le moment, on constate juste que √ßa √©crit du texte. ü§ì

En attendant, pour vous amuser et comprendre la force de PHP, essayez juste le code suivant (qu'on expliquera plus tard dans le cours) :

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Ma page web</title>
    </head>
    <body>
        <h1>Ma page web</h1>
        <p>Aujourd'hui nous sommes le <?php echo date('d/m/Y h:i:s'); ?>.</p>
    </body>
</html>

Testez ce code et admirez : la date et l'heure s'affichent automatiquement sur la page web !

Attendez quelques minutes, puis actualisez la page : l'heure s'est mise √† jour toute seule !

Regardez le code source de la page g√©n√©r√©e dans le navigateur : vous verrez qu'il n'y a pas de code PHP et que l'heure a directement √©t√© envoy√©e dans le code HTML apr√®s ex√©cution du code PHP par le serveur.

Commentez votre code

Avant de terminer ce chapitre, je tiens √† vous parler de quelque chose qui √† mes yeux a une tr√®s grande importance quand on d√©veloppe des programmes : les commentaires.

Un commentaire est un texte que l'on √©crit pour soi (ou pour d'autres d√©veloppeurs qui vont travailler dessus) dans le code PHP.

Ce texte est ignor√©, c'est-√†-dire qu'il dispara√Æt compl√®tement lors de la g√©n√©ration de la page. Il n'y a que vous qui voyez ce texte.

Mais alors, √† quoi sert un commentaire ?

Cela permet de vous y retrouver dans votre code PHP, parce que si vous n'y touchez pas pendant des semaines et que vous y revenez, vous risquez d'√™tre un peu perdu.

Vous pouvez √©crire tout et n'importe quoi, le tout est de s'en servir √† bon escient.

Il existe deux types de commentaire :

  1. Les commentaires monolignes.

  2. Les commentaires multilignes.

Tout d√©pend de la longueur de votre commentaire. Je vais vous pr√©senter les deux.

Faites des commentaires monolignes
Pour indiquer que vous √©crivez un commentaire sur une seule ligne, vous devez taper deux slashs : ¬´ //  ¬ª. Tapez ensuite votre commentaire.
Un exemple ?

<?php
echo "J'habite en Chine."; // Cette ligne indique o√π j'habite

// La ligne suivante indique mon √¢ge
echo "J'ai 92 ans.";
?>

Je vous ai mis deux commentaires √† des endroits diff√©rents :

 - le premier est √† la fin d'une ligne ;

 - le second est sur toute une ligne.

√Ä vous de voir o√π vous placez vos commentaires : si vous commentez une ligne pr√©cise, mieux vaut mettre le commentaire √† la fin de cette ligne.

Faites des commentaires multilignes
Ce sont les plus pratiques si vous pensez √©crire un commentaire sur plusieurs lignes, mais on peut aussi s'en servir pour √©crire des commentaires d'une seule ligne. Il faut commencer par √©crire /*  puis refermer par */  :

<?php
/* La ligne suivante indique mon √¢ge
Si vous ne me croyez pas...
... vous avez raison ;o) */
echo "J'ai 92 ans.";
?>

Ici, les commentaires n'ont pas grande utilit√©, mais vous verrez de quelle fa√ßon je les utilise dans les prochains chapitres pour vous d√©crire le code PHP.

En r√©sum√©

- Les pages web contenant du PHP ont l'extension .php 

- Une page PHP est une simple page HTML qui contient des instructions en langage PHP.

- Les instructions PHP sont plac√©es dans une balise ouvrante et fermante : <?php ?>  

- Pour afficher du texte en PHP, on utilise l'instruction echo  

- Il est possible d'ajouter des commentaires en PHP pour d√©crire le fonctionnement du code. On utilise pour 
  cela les symboles // ou /* */  

Dans ce chapitre vous avez d√©couvert les toutes premi√®res notions qui vont vous permettre de passer √† la suite : visualiser ses erreurs !

##############################################################################################################

Configurez PHP pour visualiser les erreurs

Avant d'aller plus loin, il est important de faire un petit point √† propos de quelque chose que vous allez sans doute beaucoup rencontrer (et ce n'est absolument pas grave !) : les erreurs.

En effet, lorsqu'un script PHP plante, le comportement par d√©faut de PHP est de n'afficher qu'une page blanche (une page de navigateur sans contenu).

Pour faciliter notre vie de d√©veloppeur, il va falloir faire en sorte que les erreurs PHP s'affichent. Sinon, nous aurons de grosses difficult√©s par la suite pour comprendre pourquoi nos pages ne marchent pas.

Nous allons donc changer la configuration de PHP.

Configurez PHP pour afficher les erreurs

Eh oui, PHP est configurable !

Si les erreurs s'affichent d√©j√† bien dans votre navigateur, inutile de faire les manipulations qui vont suivre !

Par d√©faut, PHP n'affiche pas les erreurs.

Pourquoi ?

Pour des raisons de s√©curit√© ! C'est pour √©viter de donner trop d'indications aux utilisateurs, tout simplement.

Un mantra √† vous r√©p√©ter :

"Moins l'utilisateur en sait sur mon application, mieux mon application se portera."

La configuration de PHP se fait dans un fichier appel√© php.ini

O√π est-ce qu'il se trouve, ce fichier ?

En fait, vous allez devoir le localiser. Mais pas de panique, je vous explique tout !

Localisez le fichier de configuration PHP du serveur web

Pour conna√Ætre l'ensemble des informations relatives au PHP utilis√© par le serveur web, il existe une commande PHP, phpinfo() (on parle de fonction, mais on y reviendra).

Nous allons utiliser phpinfo() pour localiser le fichier de configuration, puis le modifier.

Je vous invite donc √† cr√©er un fichier PHP avec le code qui suit :

<?php

phpinfo();

Enregistrez-le sous le nom info.php  dans le dossier accessible pour votre serveur web (normalement htdocs ou www  ).

Et enfin, affichez la page. Vous devriez obtenir le r√©sultat suivant :

Cette page contient toute une flop√©e d'informations, dont :

  - la version de PHP utilis√©e (pour moi, il s'agit de PHP 8.2.12) ;

  - le type de serveur web (ici Apache) ;

  - et la localisation du (ou des fichiers) de configuration pour PHP.

Notez que vous pouvez aussi acc√©der au phpinfo depuis le menu "PHPINFO" en haut de la page d'accueil de XAMPP.

Retrouvez la ligne "Loaded Configuration File" (ce qui signifie "fichier de configuration charg√©", en anglais), et regardez la valeur. Dans mon cas, on peut voir ceci :

Je vais donc ouvrir ce fichier et le modifier.

Modifiez le fichier de configuration PHP

Il faut s'assurer que :

 - la cl√© de configuration error_reporting a la valeur E_ALL

 - la cl√© de configuration  display_errors a la valeur On 

Allons-y √©tape par √©tape :

 1. Effectuez une recherche dans le fichier avec le terme error_reporting . S'il n'y a pas √©crit  
    error_reporting = E_ALL , remplacez-la par la bonne valeur.

 2. Ensuite, effectuez une nouvelle recherche dans le fichier avec le terme display_errors . S'il n'y a pas 
    √©crit display_errors = On , remplacez-la par la bonne valeur.

 3. Enregistrez le fichier.

 4. Relancez le serveur pour qu'il prenne en compte vos modifications. Il suffit de relancer XAMPP, par 
    exemple.

Dans le fichier de configuration, le point-virgule ( ; ) en d√©but de ligne signifie que tout ce qui suit est un commentaire, et est donc ignor√©.

Si l'une de ces lignes (ou les deux) sont comment√©es, il suffit de retirer le point-virgule en d√©but de ligne.

Faites attention √† ce que ces lignes de configuration n'existent qu'une seule fois dans le fichier : en effet, ne cr√©ez pas ces lignes si elles existaient d√©j√†.

Testez l'affichage des erreurs

Nous allons maintenant cr√©er une erreur dans un script PHP pour nous assurer que l'erreur s'affiche dans le navigateur.

Dans le script (que nous avons cr√©√© pour afficher les informations relatives √† PHP pour le serveur web ; nous l'avions appel√©  info.php  ), retirez une parenth√®se, puis enregistrez le fichier.

√áa devrait donner ceci :

<?php

phpinfo(;

Oui, je sais, il manque une parenth√®se, c'est une erreur, on le fait expr√®s.

Maintenant, affichez la page √† l'aide de votre navigateur web.

Et voil√† !

Si vous voyez bien cette erreur, c'est que PHP est configur√© pour afficher le d√©tail des erreurs.

Ouf ! √áa nous fera gagner beaucoup de temps pour comprendre nos probl√®mes par la suite.

En r√©sum√©

- PHP dispose d'un mode de d√©boggage pour afficher les erreurs contenues dans vos scripts.

- Pour activer le d√©boggage, on modifie la configuration de PHP en √©ditant le fichier php.ini.

- On peut trouver la localisation de ce fichier (et plein d'autres informations) en ex√©cutant la fonction 
  phpinfo() <?php phpinfo(); ?>  .

- Pour activer l'affichage, on change la propri√©t√© display_errors √† On et on filtre le type d'erreurs avec 
  error_reporting (on choisira E_ALL pour voir toutes les erreurs !).

C'est la fin de cette premi√®re partie, maintenant testez vos connaissances avec le quiz !

##############################################################################################################

